{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block page_title %}
{{ song.title }}, by {{ song.artist }}
{% endblock page_title %}

{% block content %}
Instrument: {% crispy instrument_select_form %}
{% crispy capo_transpose_form %}
<pre id='tab'>
{% for line in lines %}{{line|safe}}
{% endfor %}
</pre>
{% endblock content %}

{% block extra_js %}
<script language="javascript">
function reloadPage() {
  url ="{% url 'song_song_view' song.id %}/" + $('#id_name').val();
  url += "?" + $('#form_capo_transpose').serialize();
  window.location = url;
}

$(document).ready(function() {
  $('#id_name').on('change', function(e) {
    reloadPage();
  })
  $('#id_capo').on('change', function(e) {
    reloadPage();
  })
  $('#id_transpose').on('change', function(e) {
    reloadPage();
  })
});
</script>
{% endblock extra_js %}

{# vim: set ft=htmldjango :#}
